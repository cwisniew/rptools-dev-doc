---
slug: add-on-libraries
title: MapTool Add-On Libraries
authors: [craigw]
tags: [MapTool, MapTool 1.11, Libraries]
---

**Note:** This post describes a work in progress so details may change due to feedback.

# Add-On Libraries
MapTool 1.11 introduces add-on libraries which are intended to be an easier
to work with replacement for Lib:Tokens while also offering a lot more functionality.
Lib:Tokens will still function the way that they currently do in MapTool 1.11 and future 
versions, but will not be getting a lot of the new features that add-on libraries will have,
so it is recommended that framework developers transition to add-on libraries if supporting 
MapTool 1.11 and above.


## Format of add-on library files
Add-On libraries can be shared in a .mtlib file. This file is a zip file with a specific
structure and content.

```
library.json            <-- Configuration information for the add-on library
mts_properties.json     <-- Properties for macro script functions in library
library/                <-- Content of the library
library/public          <-- Content of the library acessable via `lib:// URI`
library/mtscript        <-- MTSCript files
library/mtscript/public <-- MTSCript files that can be called via `[macro(): ]` outside of the library.
```

* content/public is only exposed via lib:// URI if `allowsUriAccess` is set (see configuration file)
* MTScript macros must all end with the file extension .mts to be recognised.
* Only MTScript files in `content/mtscript/public` can be called using `[macro():]`

## format of the configuration file
The library.json configuration file is a json file with the following structure.
```json
{
  "name": "test-library",
  "version": "1.0.0",
  "website": "www.rptools.net",
  "gitUrl": "github.com/RPTools/test-library",
  "authors": [ "RPTools Team" ],
  "license": "GPL 3.0",
  "namespace": "net.rptools.maptool.test-library",
  "description": "My new test library for stuff",
  "shortDescription": "test library",
  "allowsUriAccess": true,
}

## MTScript macros
The name of the file becomes that macroname for `[macro(): ]` the namespace of the add-on library
is used for the `@` portion.  For example:

Add-On libraries support both public and private macro functions. Public macro functions must 
reside in the mtscript/public and can be called from anywhere (chat, other add-ons, lib:tokens, macro buttons).
You can call them using the following syntax
`[macro("mtscript1@net.rptools.maptool.test-library")]` executes MTScript macro in the file 
`content/mtscript/public/mtscript1.mts`.
:::Note
The "public/" is ommited from the macro name when calling it.
:::